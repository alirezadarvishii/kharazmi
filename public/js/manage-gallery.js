/*! For license information please see manage-gallery.js.LICENSE.txt */
(()=>{const e=document.querySelector("form#addNewImageForm"),t=document.querySelector("form#editImageForm"),r=document.querySelectorAll("form.delete-image"),o=document.querySelectorAll(".edit-img-btn"),n=e=>{e.preventDefault(),Swal.fire({title:"احتیاط!",text:"از حذف این تصویر مطمئن هستید؟",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"بله، مطمئنم",cancelButtonText:"لغو عملیات"}).then((async t=>{t.isConfirmed&&e.target.closest("form").submit()}))},a=e=>{const t=e.target.closest("form").querySelector("input[name=galleryImg]"),r=e.target.closest("form").querySelector("textarea[name=caption]"),o=(new FastestValidator).compile({galleryImg:{type:"string",empty:!1,messages:{stringEmpty:"آپلود تصویر الزامی است!"}},caption:{type:"string",empty:!1,messages:{stringEmpty:"توضیحات الزامی است!"}}})({galleryImg:t.value,caption:r.value});document.querySelectorAll(".invalid-feedback").forEach((e=>e.remove())),e.target.closest("form").querySelectorAll(".border-danger").forEach((e=>e.classList.remove("border-danger"))),console.log(o),!0!==o&&(e.preventDefault(),o.forEach((t=>{const r=e.target.closest("form").querySelector(`[name=${t.field}]`);r.classList.add("border-danger");const o=(e=>{const t=document.createElement("div");return t.classList="invalid-feedback d-block w-100 font-medium",t.textContent=e,t})(t.message);r.closest("div").appendChild(o)})))},c=e=>{const{imgId:t}=e.target.dataset;document.querySelector("form#editImageForm input[name=imgId]").value=t};e.addEventListener("submit",a),t.addEventListener("submit",a),r.forEach((e=>e.addEventListener("submit",n))),o.forEach((e=>e.addEventListener("click",c)))})();